!function(r){var n={};function t(e){if(n[e])return n[e].exports;var u=n[e]={i:e,l:!1,exports:{}};return r[e].call(u.exports,u,u.exports,t),u.l=!0,u.exports}t.m=r,t.c=n,t.d=function(r,n,e){t.o(r,n)||Object.defineProperty(r,n,{enumerable:!0,get:e})},t.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,n){if(1&n&&(r=t(r)),8&n)return r;if(4&n&&"object"==typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:r}),2&n&&"string"!=typeof r)for(var u in r)t.d(e,u,function(n){return r[n]}.bind(null,u));return e},t.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(n,"a",n),n},t.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},t.p="/",t(t.s=4)}([function(r,n,t){"use strict";(function(r){t.d(n,"b",function(){return i}),t.d(n,"a",function(){return a});var e=function(n){var t={style:"list-style-type: none; padding-left: 12px; margin: 0"},e={style:"flex-shrink: 0; padding-right: 5px"},u=function(r){return void 0==r?r+"":["object",{object:r}]},o=function(r){for(var n=[],t=r,o=0;"number"!=typeof t;)n.push(["li",{},["span",{style:"color: rgb(227, 110, 236)"},o],["span",e,":"],u(t[0])]),t=t[1],o++;return n},i=function(r){return Array.isArray(r)&&void 0!==r[0]&&function(r){return Array.isArray(r)&&248===r.tag&&"string"==typeof r[0]}(r[0])},a={header:function(r){var n,t;return void 0!==(n=r[Symbol.for("BsVariant")])?function(r,n){return"::"===n?["span",{},`list(${o(r).length})`]:["span",{},`${n}(…)`]}(r,n):i(r)?["div",{},`${r[0][0]}(…)`]:void 0!==(t=r[Symbol.for("BsPolyVar")])?["div",{},`\`${t}#${r[0]}`]:null},hasBody:function(r){var n;return void 0!==(n=r[Symbol.for("BsVariant")])?n:!!i(r)||void 0!==r[Symbol.for("BsPolyVar")]},body:function(r){var n;return void 0!==(n=r[Symbol.for("BsVariant")])?function(r,n){if("::"===n)return["ol",t,...o(r)];{let n=[];return r.forEach(r=>{n.push(["span",{style:"margin-right: 12px"},u(r)])}),["ol",t,...n]}}(r,n):void 0!==r[Symbol.for("BsPolyVar")]?u(r[1]):i(r)?["ol",t,...r.slice(1).map(r=>u(r))]:void 0}};"undefined"==typeof window?r.devtoolsFormatters=[a]:window.devtoolsFormatters=[a]},u={contents:!1};function o(r){if(!u.contents)return u.contents=!0,e(void 0)}function i(r,n,t){return o(),t.tag=n,Object.defineProperty(t,Symbol.for("BsVariant"),{value:r})}function a(r,n){return o(),Object.defineProperty(n,Symbol.for("BsVariant"),{value:r})}t(1).a}).call(this,t(3))},function(r,n,t){"use strict";function e(r,n){return n.tag=r,n}t.d(n,"a",function(){return e})},function(r,n,t){r.exports=t.p+"toplevel.21cd62817335f65de009858da291be4d.js"},function(r,n){var t;t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch(r){"object"==typeof window&&(t=window)}r.exports=t},function(r,n,t){"use strict";t.r(n);var e=["Failure",-2],u=["Invalid_argument",-3],o=["Division_by_zero",-5],i=["Not_found",-6];function a(r,n,t){for(var e=new Array(t),u=0,o=n;u<t;)e[u]=r[o],u=u+1|0,o=o+1|0;return e}function c(r,n){if(n<0||n>=r.length)throw[u,"index out of bounds"];return r[n]}function f(r,n){for(;;){var t=n,e=r,u=e.length,o=0===u?1:u,i=o-t.length|0;if(0===i)return e.apply(null,t);if(i>=0)return function(r,n){return function(t){return f(r,n.concat([t]))}}(e,t);n=a(t,o,0|-i),r=e.apply(null,a(t,0,o))}}function s(r,n){var t=r.length;if(1===t)return r(n);switch(t){case 1:return r(n);case 2:return function(t){return r(n,t)};case 3:return function(t,e){return r(n,t,e)};case 4:return function(t,e,u){return r(n,t,e,u)};case 5:return function(t,e,u,o){return r(n,t,e,u,o)};case 6:return function(t,e,u,o,i){return r(n,t,e,u,o,i)};case 7:return function(t,e,u,o,i,a){return r(n,t,e,u,o,i,a)};default:return f(r,[n])}}function l(r){return 1===r.length?r:function(n){return s(r,n)}}function v(r,n,t){var e=r.length;if(2===e)return r(n,t);switch(e){case 1:return f(r(n),[t]);case 2:return r(n,t);case 3:return function(e){return r(n,t,e)};case 4:return function(e,u){return r(n,t,e,u)};case 5:return function(e,u,o){return r(n,t,e,u,o)};case 6:return function(e,u,o,i){return r(n,t,e,u,o,i)};case 7:return function(e,u,o,i,a){return r(n,t,e,u,o,i,a)};default:return f(r,[n,t])}}e.tag=248,u.tag=248,o.tag=248,i.tag=248;var p=[];function d(r){if(void 0===r){var n=[p,0];return n.tag=256,n}if(null===r||r[0]!==p)return r;var t=r[1]+1|0,e=[p,t];return e.tag=256,e}function y(r){if(null===r||r[0]!==p)return r;var n=r[1];return 0===n?void 0:[p,n-1|0]}var b={contents:0};function g(r){var n=[r,(b.contents=b.contents+1,b.contents)];return n.tag=248,n}var m=g("Caml_js_exceptions.Error");function h(r){return function(r){if(void 0===r)return!1;if(248===r.tag)return!0;var n=r[0];return void 0!==n&&248===n.tag}(r)?r:[m,r]}var _=m,E=t(0),k={},w={},M={};function x(r){var n=function(r,n){try{return E.b("Ok",0,[s(r,n)])}catch(r){var t=h(r);if(t[0]===_)return E.b("Error",1,[t[1]]);throw t}};return{PhraseContent:k,Refmt:w,LinkResult:M,reset:r.js_reset,execute:function(n){return s(r.js_execute,n)},mlSyntax:r.mlSyntax,reSyntax:r.reSyntax,_wrap:n,parseRE:function(t){return n(r.parseRE,t)},parseREI:function(t){return n(r.parseREI,t)},parseML:function(t){return n(r.parseML,t)},parseMLI:function(t){return n(r.parseMLI,t)},printRE:r.printRE,printREI:r.printREI,printML:r.printML,printMLI:r.printMLI,insertModule:function(n,t,e){return r.insertModule(n,t,e)}}}var S=t(2);function R(r){if(r<0)throw[u,"String.create"];for(var n=new Array(r),t=0;t<r;++t)n[t]=0;return n}function L(r,n,t,e,u){if(!(u<=0))if(r!==t){var o=r.length-n|0;if(u<=o)for(var i=0;i<u;++i)t[e+i|0]=r[n+i|0];else{for(var a=0;a<o;++a)t[e+a|0]=r[n+a|0];for(var c=o;c<u;++c)t[e+c|0]=0}}else{if(n<e){for(var f=(r.length-e|0)-1|0,s=u-1|0,l=f>s?s:f;l>=0;--l)r[e+l|0]=r[n+l|0];return}if(n<=e)return;for(var v=(r.length-n|0)-1|0,p=u-1|0,d=v>p?p:v,y=0;y<=d;++y)r[e+y|0]=r[n+y|0]}}function I(r){var n=r.length,t="",e=n;if(n<=4096&&n===r.length)return String.fromCharCode.apply(null,r);for(var u=0;e>0;){var o=e<1024?e:1024,i=new Array(o);L(r,u,i,0,o),t+=String.fromCharCode.apply(null,i),e=e-o|0,u=u+o|0}return t}function j(r){for(var n=r.length,t=new Array(n),e=0;e<n;++e)t[e]=r.charCodeAt(e);return t}function O(r){return r>=65&&r<=90?r+32|0:r}function A(r,n){var t=n.length;if(0===t)return n;for(var e=R(t),u=0;u<t;++u)e[u]=s(r,n[u]);return e}function P(r){return I(function(r){return A(O,r)}(j(r)))}function C(r,n){return function(r,n){for(var t=r.length,e=new Array(t),u=0,o=0;o<t;++o){var i=r[o];n(i)&&(e[u]=i,u=u+1|0)}return e.length=u,e}(r,l(n))}function F(r,n,t){for(var e=n,u=0,o=r.length;u<o;++u)e=t(e,r[u]);return e}function B(r){return function(r,n){for(;;){var t=n,e=r;if(!e)return t;n=[e[0],t],r=e[1]}}(r,0)}function U(r,n){return function(r,n){if(void 0!==r)return d(n(y(r)))}(r,l(n))}g("Editor_Types-Sketch.UnknownLanguage");Math.imul;function V(r){return r>=65?r>=97?r>=123?-1:r-87|0:r>=91?-1:r-55|0:r>57||r<48?-1:r-48|0}function $(r){switch(r){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function T(r){var n=1,t=2,e=0;switch(r.charCodeAt(e)){case 43:e=e+1|0;break;case 44:break;case 45:n=-1,e=e+1|0}if("0"===r[e]){var u=r.charCodeAt(e+1|0);if(u>=89)if(u>=111){if(u<121)switch(u-111|0){case 0:t=0,e=e+2|0;break;case 6:e=e+2|0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 8:break;case 9:t=1,e=e+2|0}}else 98===u&&(t=3,e=e+2|0);else if(66!==u){if(u>=79)switch(u-79|0){case 0:t=0,e=e+2|0;break;case 6:e=e+2|0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 8:break;case 9:t=1,e=e+2|0}}else t=3,e=e+2|0}return[e,n,t]}function z(r){var n=T(r),t=n[0],u=$(n[2]),o=r.length,i=V(t<o?r.charCodeAt(t):0);if(i<0||i>=u)throw[e,"int_of_string"];var a=n[1]*function(n,t){for(;;){var i=t,a=n;if(i===o)return a;var c=r.charCodeAt(i);if(95!==c){var f=V(c);if(f<0||f>=u)throw[e,"int_of_string"];var s=u*a+f;if(s>4294967295)throw[e,"int_of_string"];t=i+1|0,n=s}else t=i+1|0}}(i,t+1|0),c=0|a;if(10===u&&a!==c)throw[e,"int_of_string"];return c}function N(r){return F(C(r.split('File "", '),function(r){return""!==r.trim()}),[],function(r,n){var t,e=n.split(/line\s(\d+), characters (\d+)-(\d+):\n/gi);if(5!==e.length)t=E.b("Err_Unknown",2,['File "", '+n]);else{var u=e[1];if(void 0!==u){var o=e[2];if(void 0!==o){var i=e[3];if(void 0!==i){var a=e[4];if(void 0!==a){var c=z(u),f=a.trim(),s={errMsg_content:f,errMsg_loc:[{line:c-1|0,col:z(o)},{line:c-1|0,col:z(i)}]};t=0===f.indexOf("Error")?E.b("Err_Error",1,[s]):0===f.indexOf("Warning")?E.b("Err_Warning",0,[s]):E.b("Err_Unknown",2,['File "", '+n])}else t=E.b("Err_Unknown",2,['File "", '+n])}else t=E.b("Err_Unknown",2,['File "", '+n])}else t=E.b("Err_Unknown",2,['File "", '+n])}else t=E.b("Err_Unknown",2,['File "", '+n])}return function(r,n){for(var t=r.length,e=n.length,u=new Array(t+e|0),o=0;o<t;++o)u[o]=r[o];for(var i=0;i<e;++i)u[t+i|0]=n[i];return u}(r,[t])})}function W(r){return{line:r.line-1|0,col:r.col}}t.d(n,"toplevelPath",function(){return D}),t.d(n,"Analyze",function(){return q}),t.d(n,"Refmt",function(){return G});var D=S;importScripts(D),postMessage({w_id:"ready",w_message:0});var q=function(r){var n=x(r),t=function(r){return""===r?void 0:r},e=function(r,n){var e,u=n.stderr,o=n.loc;if(null==o)if(void 0!==r){var i=r[1],a=i.col,c=i.line;e=[{line:c+1|0,col:a+1|0},{line:c+1|0,col:a+1|0}]}else e=[{line:0,col:0},{line:0,col:0}];else e=function(r){return[W(r[0]),W(r[1])]}(o);var f=t(u);return[e,{block_result:{blockResult_evaluate:t(n.value),blockResult_stderr:U(f,N),blockResult_stdout:t(n.stdout)},block_loc:e}]},o=function(r){for(var t,o=s(n.execute,r),i=o.length,a=0,f=0;;){var l=t,v=f,p=a;if(p>=i)return[B(v),!1];var d=c(o,p),y=d.kind;switch(y){case"Error":var b=e(l,d.value);return[E.a("::",[b[1],v]),!0];case"Ok":var g=e(l,d.value);t=g[0],f=E.a("::",[g[1],v]),a=p+1|0;continue;default:throw[u,"Unknown phrase result "+y]}}},i=function(r,t,e){s(r?n.reSyntax:n.mlSyntax,void 0);var u=P(function(r){return r?"RE":"ML"}(r)),o=n.insertModule(t,e,u);switch(o.kind){case"Error":return E.b("Error",1,[o.value]);case"Ok":return E.b("Ok",0,[void 0]);default:return E.b("Error",1,["unknown link result"])}},a=g("Worker_Analyze-Sketch.Make(ESig).Not_Implemented"),f=function(r){for(var n=r,t=0;;){var e=t,u=n;if(!u)return e;var o,c=u[0];if(c.tag)throw a;var f=c[0],s={link:(o=[c,i(f.lang,f.name,f.code)])[0],result:o[1]};t=E.a("::",[s,e]),n=u[1]}};return{Evaluator:n,emptyStringToOption:t,parseStderr:function(r){return U(r,N)},makeBlockResult:e,execute:o,link:i,Not_Implemented:a,linkMany:f,executeMany:function(r,t,e){s(n.reset,void 0);var u=f(e);return s(r?n.reSyntax:n.mlSyntax,void 0),[u,function(r,n){for(;;){var t=n,e=r;if(!e)return t;var u=e[0],i=o(u.binput_value),a={id:u.binput_id,result:i[0]};if(i[1])return E.a("::",[a,t]);n=E.a("::",[a,t]),r=e[1]}}(t,0)]},executeEmbed:function(r,t){return s(n.reset,void 0),s(r?n.reSyntax:n.mlSyntax,void 0),o(t)[0]}}}({js_execute:function(r){return evaluator.execute(r)},js_reset:function(r){evaluator.reset()},mlSyntax:function(r){evaluator.mlSyntax()},reSyntax:function(r){evaluator.reasonSyntax()},parseRE:function(r){return refmt.parseRE(r)},parseREI:function(r){return refmt.parseREI(r)},printRE:function(r){return refmt.printRE(r)},printREI:function(r){return refmt.printREI(r)},parseML:function(r){return refmt.parseML(r)},parseMLI:function(r){return refmt.parseMLI(r)},printML:function(r){return refmt.printML(r)},printMLI:function(r){return refmt.printMLI(r)},insertModule:evaluator.insertModule}),G=function(r){var n=x(r);return{Evaluator:n,refmtMany:function(r,t){var e;switch(r){case 0:e=[n.parseRE,n.printML];break;case 1:e=[n.parseML,n.printRE];break;case 2:e=[n.parseRE,n.printRE]}var u=e[1],o=e[0],i=function(r){var n=s(o,r);return n.tag?E.b("Error",1,[n[0]]):E.b("Ok",0,[s(u,n[0]).trim()])},a=function(r,n,t){for(;;){var e=t,u=n,o=r;if(!o)return[u,e];var a=o[0],c=i(a.binput_value),f={refmt_id:a.binput_id,refmt_value:c};t=e||!!c.tag,n=E.a("::",[f,u]),r=o[1]}}(t,0,!1);return{hasError:a[1],result:a[0]}}}}({js_execute:function(r){return evaluator.execute(r)},js_reset:function(r){evaluator.reset()},mlSyntax:function(r){evaluator.mlSyntax()},reSyntax:function(r){evaluator.reasonSyntax()},parseRE:function(r){return refmt.parseRE(r)},parseREI:function(r){return refmt.parseREI(r)},printRE:function(r){return refmt.printRE(r)},printREI:function(r){return refmt.printREI(r)},parseML:function(r){return refmt.parseML(r)},parseMLI:function(r){return refmt.parseMLI(r)},printML:function(r){return refmt.printML(r)},printMLI:function(r){return refmt.printMLI(r)},insertModule:evaluator.insertModule});self.onmessage=function(r){var n,t=r.data,e=t.t_message;switch(0|e.tag){case 0:n=E.b("ExecuteResult",0,[E.b("Ok",0,[q.executeMany(e[0],e[1],e[2])])]);break;case 1:var u=q.executeEmbed(e[0],e[1]);n=E.b("ExecuteEmbedResult",1,[E.b("Ok",0,[u])]);break;case 2:n=E.b("RefmtResult",2,[E.b("Ok",0,[v(G.refmtMany,e[0],e[1])])]);break;case 3:try{importScripts(e[0])}catch(r){var o=h(r);if(o[0]!==_)throw o;console.log(o[1])}n=1}postMessage({w_id:t.t_id,w_message:n})}}]);